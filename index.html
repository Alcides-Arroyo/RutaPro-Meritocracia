<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RutaPro â€“ Meritocracia</title>
<meta name="description" content="Calculadora y definiciones de Meritocracia para movilidad interna â€“ pÃ¡gina Ãºnica, sin dependencias externas."/>
<style>
  /* =========================================================
     Variables de diseÃ±o (marca RutaPro/Promerica-like)
  ========================================================= */
  :root{
    --primary:#2a9d3e;         /* Verde principal */
    --primary-600:#238536;     /* Hover principal */
    --accent:#00c271;          /* Verde secundario */
    --bg:#f7faf8;              /* Fondo claro */
    --surface:#ffffff;         /* Tarjetas claras */
    --text:#1a1f1c;            /* Texto principal */
    --muted:#6b7280;           /* Texto secundario */
    --shadow:0 12px 28px rgba(0,0,0,.08);
    --radius:16px; --radius-sm:12px;
    --glass:rgba(255,255,255,.62); --glass-border:rgba(255,255,255,.35);
  }
  [data-theme="dark"]{
    --primary:#39d16f; --primary-600:#2fb965; --accent:#14d990;
    --bg:#0e1411; --surface:#121a16; --text:#e9f4ee; --muted:#90a39a;
    --glass:rgba(18,26,22,.45); --glass-border:rgba(255,255,255,.08);
    --shadow:0 10px 30px rgba(0,0,0,.45);
  }

  /* =========================================================
     TipografÃ­a y resets
  ========================================================= */
  *,*::before,*::after{box-sizing:border-box}
  :focus-visible{outline:3px solid var(--accent); outline-offset:3px; border-radius:10px}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text); line-height:1.55;
    font-family:"Segoe UI", Inter, "Helvetica Neue", Arial, system-ui, -apple-system, "Liberation Sans", sans-serif;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  h1,h2,h3{line-height:1.2; margin:.2rem 0 .5rem; font-weight:900}
  p{margin:.2rem 0 1rem}
  .muted{color:var(--muted)}
  a{color:var(--primary); text-decoration:none}
  a:hover{text-decoration:underline}

  /* =========================================================
     Barra superior
  ========================================================= */
  .topbar{position:sticky; top:0; z-index:50; backdrop-filter:saturate(130%) blur(8px);
    background:linear-gradient(180deg, rgba(255,255,255,.80), rgba(255,255,255,.52));
    border-bottom:1px solid var(--glass-border);}
  [data-theme="dark"] .topbar{background:linear-gradient(180deg, rgba(18,26,22,.80), rgba(18,26,22,.52));}
  .nav{max-width:1200px; margin:0 auto; padding:10px 16px; display:flex; align-items:center; justify-content:space-between; gap:12px}
  .brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.2px}
  .brand svg{width:26px; height:26px}
  .actions{display:flex; align-items:center; gap:10px}
  .btn{appearance:none; border:none; cursor:pointer; background:var(--primary); color:#fff; font-weight:800; padding:10px 14px; border-radius:999px; box-shadow:var(--shadow); transition:transform .18s ease, background .18s ease}
  .btn:hover{transform:translateY(-1px); background:var(--primary-600)}
  .btn.ghost{background:transparent; color:var(--text); border:1px solid rgba(0,0,0,.10)}
  [data-theme="dark"] .btn.ghost{border-color:rgba(255,255,255,.18)}

  /* =========================================================
     Hero con glassmorphism y parallax leve
  ========================================================= */
  header.hero{position:relative; overflow:hidden; background:
    radial-gradient(1100px 520px at -10% 0%, rgba(42,157,62,.20), transparent),
    radial-gradient(900px 500px at 110% 10%, rgba(0,194,113,.12), transparent);
  }
  .hero-inner{max-width:1200px; margin:0 auto; padding:40px 16px 24px; display:grid; grid-template-columns:1.15fr 1fr; gap:24px; align-items:center}
  @media (max-width: 980px){ .hero-inner{grid-template-columns:1fr} }
  .hero-card{background:var(--glass); border:1px solid var(--glass-border); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow)}
  .cta{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
  .parallax-blob{position:absolute; width:360px; height:360px; border-radius:50%; background:radial-gradient(circle at 30% 30%, rgba(57,209,111,.30), transparent 60%); filter:blur(8px); pointer-events:none}

  /* =========================================================
     Secciones y tarjetas
  ========================================================= */
  section{padding:36px 16px}
  .container{max-width:1200px; margin:0 auto}
  .grid-2{display:grid; gap:16px; grid-template-columns:1fr 1fr}
  .grid-3{display:grid; gap:16px; grid-template-columns:repeat(3,1fr)}
  @media (max-width:980px){ .grid-2,.grid-3{grid-template-columns:1fr} }
  .card{background:var(--surface); border-radius:var(--radius); border:1px solid rgba(0,0,0,.08); box-shadow:var(--shadow); padding:16px}
  [data-theme="dark"] .card{border-color:rgba(255,255,255,.12)}
  .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:rgba(42,157,62,.10); color:var(--primary); font-weight:800; font-size:.85rem}
  .pill{background:rgba(0,0,0,.06); color:var(--muted); border-radius:999px; padding:6px 10px; font-size:.9rem}
  [data-theme="dark"] .pill{background:rgba(255,255,255,.08)}

  /* =========================================================
     Controles, sliders y medidores
  ========================================================= */
  .ctrl{display:grid; gap:8px}
  label{font-size:.95rem; font-weight:800; color:var(--muted)}
  input[type="range"], input[type="checkbox"], input[type="radio"]{accent-color:var(--primary)}
  .value{font-weight:800}

  /* =========================================================
     Gauge circular (SVG)
  ========================================================= */
  .gauge{width:220px; height:220px; display:block; margin:auto}
  .gauge .track{stroke:rgba(0,0,0,.10)}
  [data-theme="dark"] .gauge .track{stroke:rgba(255,255,255,.12)}
  .gauge .bar{stroke:url(#grad)}
  .gauge text{font-weight:900; fill:currentColor}

  /* =========================================================
     Resultado / decisiÃ³n
  ========================================================= */
  .result{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  .status{font-weight:900}
  .status-ready{color:var(--primary)}
  .status-soon{color:#d1a000}
  .status-build{color:#d14a4a}

  /* =========================================================
     Confeti (canvas)
  ========================================================= */
  #confetti{position:fixed; inset:0; pointer-events:none; z-index:100; display:none}

  /* Respeta reduce motion */
  @media (prefers-reduced-motion: reduce){ *{animation:none!important; transition:none!important} }
</style>
</head>
<body>
  <!-- Confeti -->
  <canvas id="confetti"></canvas>

  <!-- Topbar -->
  <div class="topbar" role="banner">
    <div class="nav" aria-label="Barra superior">
      <div class="brand" aria-label="RutaPro">
        <svg viewBox="0 0 100 100" aria-hidden="true"><defs><linearGradient id="g1" x1="0" x2="1" y1="0" y2="1"><stop stop-color="var(--primary)" offset="0"/><stop stop-color="var(--accent)" offset="1"/></linearGradient></defs><polygon points="50,5 61,36 95,36 67,56 77,90 50,70 23,90 33,56 5,36 39,36" fill="url(#g1)"/></svg>
        <span>RutaPro</span>
      </div>
      <div class="actions">
        <button id="seed" class="btn ghost" title="Valores de ejemplo">Sembrar</button>
        <button id="reset" class="btn ghost" title="Restablecer">Reset</button>
        <button id="theme" class="btn ghost" title="Modo claro/oscuro">ðŸŒž/ðŸŒ™</button>
      </div>
    </div>
  </div>

  <!-- Hero -->
  <header class="hero" role="region" aria-label="Meritocracia">
    <div class="parallax-blob" id="blob1" style="left:-80px; top:40px"></div>
    <div class="parallax-blob" id="blob2" style="right:-120px; top:140px"></div>

    <div class="hero-inner">
      <div>
        <h1>Meritocracia â€“ RutaPro</h1>
        <p class="muted">Calcula tu <strong>Score de Meritocracia</strong>, entiende sus componentes y mira la <strong>regla de decisiÃ³n</strong> para promocionar con equidad.</p>
        <div class="cta">
          <a href="#calc" class="btn">Calcular mi score</a>
          <button id="printBtn" class="btn ghost">Imprimir / PDF</button>
        </div>
        <p class="muted" style="margin-top:8px">FÃ³rmula base: <strong>Resultados 70%</strong> + <strong>Comportamiento 20%</strong> + <strong>Potencial 10%</strong>.</p>
      </div>
      <div class="hero-card" aria-label="Resumen de mÃ©tricas">
        <div class="grid-2">
          <div>
            <span class="badge">Definiciones</span>
            <ul class="muted" style="margin:.6rem 0 0 1rem">
              <li><strong>Resultados</strong>: objetivos, calidad y eficiencia.</li>
              <li><strong>Comportamiento</strong>: colaboraciÃ³n, valores e innovaciÃ³n.</li>
              <li><strong>Potencial</strong>: aprendizaje, adaptabilidad y liderazgo.</li>
            </ul>
          </div>
          <div>
            <span class="badge">Regla de decisiÃ³n</span>
            <ul class="muted" style="margin:.6rem 0 0 1rem">
              <li><strong>Score â‰¥ 85</strong> y <strong>Requisitos â‰¥ 90%</strong> â†’ Ready Now</li>
              <li><strong>70â€“84</strong> â†’ Ready Soon</li>
              <li><strong>&lt; 70</strong> â†’ Build Skills First</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Calculadora -->
  <section id="calc" aria-labelledby="calc-title">
    <div class="container">
      <h2 id="calc-title">Calculadora de Meritocracia</h2>
      <div class="grid-2">
        <!-- Panel de controles -->
        <div class="card" role="form" aria-describedby="calc-help">
          <span class="badge">Ajusta tus valores (0â€“100)</span>
          <div class="ctrl" style="margin-top:10px">
            <label for="sResultados">Resultados (70%) â€” metas, calidad, eficiencia <span class="value" id="vR">72</span></label>
            <input type="range" id="sResultados" min="0" max="100" value="72" aria-label="Resultados"/>
            <div class="meter" aria-hidden="true"><span id="mR"></span></div>
          </div>
          <div class="ctrl">
            <label for="sComport">Comportamiento (20%) â€” equipo, valores, innovaciÃ³n <span class="value" id="vC">78</span></label>
            <input type="range" id="sComport" min="0" max="100" value="78" aria-label="Comportamiento"/>
            <div class="meter" aria-hidden="true"><span id="mC"></span></div>
          </div>
          <div class="ctrl">
            <label for="sPotencial">Potencial (10%) â€” aprendizaje, adaptabilidad, liderazgo <span class="value" id="vP">70</span></label>
            <input type="range" id="sPotencial" min="0" max="100" value="70" aria-label="Potencial"/>
            <div class="meter" aria-hidden="true"><span id="mP"></span></div>
          </div>
          <div class="ctrl" style="margin-top:6px">
            <label for="sReq">Requisitos del puesto (% cumplidos) <span class="value" id="vReq">88%</span></label>
            <input type="range" id="sReq" min="0" max="100" value="88" aria-label="Porcentaje de requisitos cumplidos"/>
            <div class="meter" aria-hidden="true"><span id="mReq"></span></div>
          </div>
          <p id="calc-help" class="muted" style="margin-top:8px">Este mÃ³dulo es una demo sin datos reales. Usa valores de referencia de evaluaciones internas.</p>
          <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:10px">
            <button id="seed2" class="btn ghost">Aleatorio</button>
            <button id="exportBtn" class="btn">Exportar evaluaciÃ³n</button>
          </div>
        </div>

        <!-- VisualizaciÃ³n y decisiÃ³n -->
        <div class="card" role="region" aria-live="polite">
          <div class="grid-2">
            <div>
              <!-- Gauge circular -->
              <svg class="gauge" viewBox="0 0 120 120" role="img" aria-label="Medidor de score">
                <defs>
                  <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0" stop-color="var(--primary)"/>
                    <stop offset="1" stop-color="var(--accent)"/>
                  </linearGradient>
                </defs>
                <!-- Track -->
                <circle class="track" cx="60" cy="60" r="50" stroke-width="12" fill="none" opacity="0.25"/>
                <!-- Bar -->
                <circle id="gBar" class="bar" cx="60" cy="60" r="50" stroke-width="12" fill="none" stroke-linecap="round" transform="rotate(-90 60 60)" stroke-dasharray="0 999"/>
                <text id="gText" x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20">0</text>
              </svg>
            </div>
            <div>
              <h3 style="margin-top:0">Resultado</h3>
              <div class="result" id="decisionBox">
                <span class="badge">Score</span>
                <span class="status status-build">Calculandoâ€¦</span>
              </div>
              <div class="meters" style="margin-top:10px">
                <div class="pill" id="bReq">Requisitos: 0%</div>
                <div class="pill" id="bBreak">Aportes â€” R: 0 Â· C: 0 Â· P: 0</div>
              </div>
              <p class="muted" style="margin-top:10px">Regla: <strong>Score â‰¥ 85</strong> y <strong>Requisitos â‰¥ 90%</strong> â†’ Ready Now; <strong>70â€“84</strong> â†’ Ready Soon; <strong>&lt; 70</strong> â†’ Build Skills First.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Definiciones y buenas prÃ¡cticas -->
  <section aria-labelledby="defs-title">
    <div class="container">
      <h2 id="defs-title">Definiciones y buenas prÃ¡cticas</h2>
      <div class="grid-3">
        <div class="card">
          <h3>Resultados (70%)</h3>
          <p>MediciÃ³n del desempeÃ±o: cumplimiento de objetivos, calidad de entregables, eficiencia y mejora continua.</p>
          <ul class="muted" style="margin-left:1rem">
            <li>Evidencias: OKRs, KPIs, calidad (NPS interno), tasas de error.</li>
            <li>Periodo sugerido: Ãºltimos 12 meses.</li>
          </ul>
        </div>
        <div class="card">
          <h3>Comportamiento (20%)</h3>
          <p>CÃ³mo se logran los resultados: colaboraciÃ³n, trabajo en equipo, vivencia de valores e innovaciÃ³n.</p>
          <ul class="muted" style="margin-left:1rem">
            <li>Fuentes: feedback 180Â°/360Â°, registro de iniciativas, participaciÃ³n.</li>
            <li>Evitar sesgos: calibraciÃ³n por panel.</li>
          </ul>
        </div>
        <div class="card">
          <h3>Potencial (10%)</h3>
          <p>Capacidad de aprendizaje, adaptabilidad y liderazgo para roles futuros; no es antigÃ¼edad.</p>
          <ul class="muted" style="margin-left:1rem">
            <li>Indicadores: nuevas habilidades, mentoring, stretch assignments.</li>
            <li>Evitar decisiones solo por potencial.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Transparencia, equidad y notas -->
  <section aria-labelledby="ethics-title">
    <div class="container">
      <h2 id="ethics-title">Transparencia, equidad y seguridad</h2>
      <div class="card">
        <ul class="muted" style="margin: 8px 0 0 16px;">
          <li>Privacidad: minimizaciÃ³n de datos, accesos por rol y auditorÃ­a.</li>
          <li>Fairness: revisiÃ³n humana, calibraciÃ³n y monitoreo de disparidades.</li>
          <li>Explicabilidad: fÃ³rmula visible, pesos y umbrales claros, justificaciÃ³n de recomendaciones.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="card" style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap">
        <div class="muted">Â© RutaPro â€“ Meritocracia (demo). Sin dependencias externas.</div>
        <div style="display:flex; gap:8px; flex-wrap:wrap">
          <button class="btn ghost" id="printBtn2">Descargar PDF</button>
          <button class="btn" id="exportBtn2">Exportar selecciÃ³n</button>
        </div>
      </div>
    </div>
  </footer>

<script>
  // ========================= Estado =========================
  const state = {
    sliders: { R:72, C:78, P:70 },
    reqPct: 88,
    score: 0,
  };

  // ======================== Utilidades =======================
  const $ = (s, r=document) => r.querySelector(s);
  const clamp = (v,min,max)=> Math.min(max, Math.max(min, v));

  // ======================== Parallax hero =====================
  function setupParallax(){
    const b1 = $('#blob1'), b2 = $('#blob2');
    const tick = ()=>{ const dy = scrollY*0.08; b1.style.transform = `translateY(${dy}px)`; b2.style.transform = `translateY(${dy*0.6}px)`; requestAnimationFrame(tick); };
    requestAnimationFrame(tick);
  }

  // ======================= Tema claro/oscuro ==================
  function setupTheme(){
    const btn = $('#theme');
    const saved = localStorage.getItem('rutapro_theme');
    if(saved) document.documentElement.setAttribute('data-theme', saved);
    const toggle = ()=>{ const cur = document.documentElement.getAttribute('data-theme'); const next = (cur==='dark')?'light':'dark'; document.documentElement.setAttribute('data-theme', next); localStorage.setItem('rutapro_theme', next); };
    btn.addEventListener('click', toggle);
  }

  // ==================== Gauge circular (SVG) ==================
  function setGauge(pct){
    pct = clamp(pct, 0, 100);
    const c = 2 * Math.PI * 50; // circunferencia r=50
    const dash = (pct/100) * c;
    const rest = c - dash;
    const bar = $('#gBar'); const txt = $('#gText');
    bar.setAttribute('stroke-dasharray', `${dash} ${rest}`);
    txt.textContent = pct;
  }

  // ====================== CÃ¡lculo de Score ====================
  function computeScore(){
    const R = +$('#sResultados').value;
    const C = +$('#sComport').value;
    const P = +$('#sPotencial').value;
    const Req = +$('#sReq').value;
    state.sliders = {R,C,P}; state.reqPct = Req;
    const score = Math.round(0.7*R + 0.2*C + 0.1*P);
    state.score = score;

    // UI valores
    $('#vR').textContent = R; $('#vC').textContent = C; $('#vP').textContent = P; $('#vReq').textContent = Req + '%';
    $('#mR').style.width = R + '%'; $('#mC').style.width = C + '%'; $('#mP').style.width = P + '%'; $('#mReq').style.width = Req + '%';

    // Gauge
    setGauge(score);

    // Badges
    $('#bReq').textContent = `Requisitos: ${Req}%`;
    $('#bBreak').textContent = `Aportes â€” R: ${Math.round(0.7*R)} Â· C: ${Math.round(0.2*C)} Â· P: ${Math.round(0.1*P)}`;

    // DecisiÃ³n
    const box = $('#decisionBox');
    let status = '', cls = '';
    if(score>=85 && Req>=90){ status='Ready Now'; cls='status-ready'; launchConfetti(); }
    else if(score>=70){ status='Ready Soon'; cls='status-soon'; }
    else { status='Build Skills First'; cls='status-build'; }
    box.innerHTML = `<span class="badge">Score</span> <span class="status ${cls}">${status}</span>`;
  }

  // ========================== Confeti ========================
  let confettiTimer = null;
  function launchConfetti(){
    const canvas = $('#confetti'); const ctx = canvas.getContext('2d');
    const w = canvas.width = innerWidth; const h = canvas.height = innerHeight;
    canvas.style.display = 'block';
    const N = 140; const parts = Array.from({length:N},()=>({x: Math.random()*w, y:-20-Math.random()*h*0.5, vy:2+Math.random()*3, vx:-1+Math.random()*2, s:4+Math.random()*4, r:Math.random()*360 }));
    cancelAnimationFrame(confettiTimer); let t0=null; const dur=2300;
    (function tick(ts){ if(!t0) t0=ts; const dt=ts-t0; ctx.clearRect(0,0,w,h);
      parts.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.r+=5; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r*Math.PI/180);
        ctx.fillStyle = (Math.random()>.5? getComputedStyle(document.documentElement).getPropertyValue('--primary') : getComputedStyle(document.documentElement).getPropertyValue('--accent'));
        ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s); ctx.restore(); });
      if(dt<dur){ confettiTimer = requestAnimationFrame(tick);} else { canvas.style.display='none'; }
    })(performance.now());
  }

  // ======================= Acciones varias ====================
  function seed(){
    const r = ()=> Math.floor(55 + Math.random()*45); // 55-100
    $('#sResultados').value = r(); $('#sComport').value = r(); $('#sPotencial').value = r(); $('#sReq').value = Math.floor(70 + Math.random()*30);
    computeScore();
  }
  function reset(){
    $('#sResultados').value = 72; $('#sComport').value = 78; $('#sPotencial').value = 70; $('#sReq').value = 88; computeScore();
  }
  function exportJSON(){
    const payload = { ...state, when: new Date().toISOString(), version:'meritocracia_v1' };
    const blob = new Blob([JSON.stringify(payload,null,2)], {type:'application/json'});
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'rutapro_meritocracia.json'; a.click(); URL.revokeObjectURL(a.href);
  }

  // ===================== InicializaciÃ³n =======================
  function init(){
    setupParallax(); setupTheme();
    ['sResultados','sComport','sPotencial','sReq'].forEach(id=> $('#'+id).addEventListener('input', computeScore));
    $('#seed').addEventListener('click', seed); $('#seed2').addEventListener('click', seed);
    $('#reset').addEventListener('click', reset);
    $('#exportBtn').addEventListener('click', exportJSON); $('#exportBtn2').addEventListener('click', exportJSON);
    const printFn = ()=> window.print();
    $('#printBtn').addEventListener('click', printFn); $('#printBtn2').addEventListener('click', printFn);
    computeScore();
  }
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
